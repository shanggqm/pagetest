<svg width="1248" height="675" viewBox="0 0 1248 675" fill="none" xmlns="http://www.w3.org/2000/svg">
  <!-- 单层模式（单机） -->
  <rect x="45" y="30" width="516" height="280" rx="6" fill="#F2F2F2" stroke="#DDDDDD"/>
  <text x="126" y="62" font-family="Arial" font-size="18" font-weight="bold" fill="#333333">单层模式（单机）</text>
  
  <!-- MCP Host左侧 -->
  <rect x="69" y="153" width="86" height="60" rx="3" fill="#666666"/>
  <text x="106" y="188" font-family="Arial" font-size="14" font-weight="bold" fill="white" text-anchor="middle">MCP Host</text>

  <!-- MCP Server A -->
  <rect x="216" y="83" width="92" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="263" y="107" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server A</text>
  <text x="263" y="123" font-family="Arial" font-size="11" fill="#333333" text-anchor="middle">(Github)</text>

  <!-- MCP Server B -->
  <rect x="216" y="153" width="92" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="263" y="177" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server B</text>
  <text x="263" y="193" font-family="Arial" font-size="11" fill="#333333" text-anchor="middle">(GitLab)</text>

  <!-- MCP Server C -->
  <rect x="216" y="223" width="92" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="263" y="247" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server C</text>
  <text x="263" y="263" font-family="Arial" font-size="11" fill="#333333" text-anchor="middle">(filesystem)</text>

  <!-- 连接线 -->
  <path d="M155 169 L216 113" stroke="#333333" stroke-width="1"/>
  <path d="M155 183 L216 183" stroke="#333333" stroke-width="1"/>
  <path d="M155 200 L216 253" stroke="#333333" stroke-width="1"/>

  <!-- Tool A1 -->
  <rect x="362" y="83" width="92" height="30" rx="3" fill="#F59393" stroke="#E06666"/>
  <text x="407" y="102" font-family="Arial" font-size="12" fill="white" text-anchor="middle">create_repo</text>

  <!-- Tool A2 -->
  <rect x="362" y="113" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="407" y="132" font-family="Arial" font-size="12" fill="white" text-anchor="middle">other tool</text>

  <!-- Tool B1 -->
  <rect x="362" y="153" width="92" height="30" rx="3" fill="#F59393" stroke="#E06666"/>
  <text x="407" y="172" font-family="Arial" font-size="12" fill="white" text-anchor="middle">create_repo</text>

  <!-- Tool B2 -->
  <rect x="362" y="183" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="407" y="202" font-family="Arial" font-size="12" fill="white" text-anchor="middle">other tool</text>

  <!-- Tool C1 -->
  <rect x="362" y="223" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="407" y="242" font-family="Arial" font-size="12" fill="white" text-anchor="middle">read_directory</text>

  <!-- Tool C2 -->
  <rect x="362" y="253" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="407" y="272" font-family="Arial" font-size="12" fill="white" text-anchor="middle">...</text>

  <!-- 连接线 -->
  <path d="M308 113 L362 98" stroke="#333333" stroke-width="1"/>
  <path d="M308 113 L362 128" stroke="#333333" stroke-width="1"/>
  <path d="M308 183 L362 168" stroke="#333333" stroke-width="1"/>
  <path d="M308 183 L362 198" stroke="#333333" stroke-width="1"/>
  <path d="M308 253 L362 238" stroke="#333333" stroke-width="1"/>
  <path d="M308 253 L362 268" stroke="#333333" stroke-width="1"/>

  <!-- 嵌套模式（分布式）-->
  <rect x="561" y="30" width="642" height="280" rx="6" fill="#F2F2F2" stroke="#DDDDDD"/>
  <text x="651" y="62" font-family="Arial" font-size="18" font-weight="bold" fill="#333333">嵌套模式（分布式）</text>

  <!-- MCP Host -->
  <rect x="585" y="215" width="86" height="60" rx="3" fill="#666666"/>
  <text x="628" y="250" font-family="Arial" font-size="14" font-weight="bold" fill="white" text-anchor="middle">MCP Host</text>

  <!-- Gateway A -->
  <rect x="732" y="115" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="775" y="139" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server A</text>
  <text x="775" y="155" font-family="Arial" font-size="11" fill="#333333" text-anchor="middle">(Gateway1)</text>

  <!-- Gateway B -->
  <rect x="732" y="215" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="775" y="239" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server B</text>
  <text x="775" y="255" font-family="Arial" font-size="11" fill="#333333" text-anchor="middle">(Gateway2)</text>

  <!-- Gateway C -->
  <rect x="732" y="315" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="775" y="339" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server C</text>
  <text x="775" y="355" font-family="Arial" font-size="11" fill="#333333" text-anchor="middle">(filesystem)</text>

  <!-- 连接线 -->
  <path d="M671 225 L732 145" stroke="#333333" stroke-width="1"/>
  <path d="M671 245 L732 245" stroke="#333333" stroke-width="1"/>
  <path d="M671 265 L732 345" stroke="#333333" stroke-width="1"/>

  <!-- Server A1 -->
  <rect x="878" y="80" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="921" y="104" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server A1</text>

  <!-- Server A2 -->
  <rect x="878" y="145" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="921" y="169" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server A2</text>

  <!-- Server B1 -->
  <rect x="878" y="180" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="921" y="204" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server B1</text>

  <!-- Server B2 -->
  <rect x="878" y="245" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="921" y="269" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server B2</text>

  <!-- 连接线 -->
  <path d="M818 130 L878 110" stroke="#333333" stroke-width="1"/>
  <path d="M818 145 L878 175" stroke="#333333" stroke-width="1"/>
  <path d="M818 230 L878 210" stroke="#333333" stroke-width="1"/>
  <path d="M818 245 L878 275" stroke="#333333" stroke-width="1"/>

  <!-- Tool A1-1 -->
  <rect x="1024" y="75" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="1070" y="94" font-family="Arial" font-size="12" fill="white" text-anchor="middle">toolA1-1</text>

  <!-- Tool A1-2 -->
  <rect x="1024" y="105" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="1070" y="124" font-family="Arial" font-size="12" fill="white" text-anchor="middle">...</text>

  <!-- Tool A2-1 -->
  <rect x="1024" y="140" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="1070" y="159" font-family="Arial" font-size="12" fill="white" text-anchor="middle">toolA2-1</text>

  <!-- Tool A2-2 -->
  <rect x="1024" y="170" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="1070" y="189" font-family="Arial" font-size="12" fill="white" text-anchor="middle">...</text>

  <!-- Tool B1-1 -->
  <rect x="1024" y="190" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="1070" y="209" font-family="Arial" font-size="12" fill="white" text-anchor="middle">toolB1-1</text>

  <!-- Tool B1-2 -->
  <rect x="1024" y="220" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="1070" y="239" font-family="Arial" font-size="12" fill="white" text-anchor="middle">...</text>

  <!-- Server B2-1 -->
  <rect x="1024" y="245" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="1067" y="269" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server B2-1</text>

  <!-- B2-1 Tool -->
  <rect x="1140" y="260" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="1186" y="279" font-family="Arial" font-size="12" fill="white" text-anchor="middle">...</text>

  <!-- read_directory -->
  <rect x="878" y="315" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="924" y="334" font-family="Arial" font-size="12" fill="white" text-anchor="middle">read_directory</text>

  <!-- ... -->
  <rect x="878" y="345" width="92" height="30" rx="3" fill="#9AE09F" stroke="#6AA84F"/>
  <text x="924" y="364" font-family="Arial" font-size="12" fill="white" text-anchor="middle">...</text>

  <!-- 连接线 -->
  <path d="M964 110 L1024 90" stroke="#333333" stroke-width="1"/>
  <path d="M964 110 L1024 120" stroke="#333333" stroke-width="1"/>
  <path d="M964 175 L1024 155" stroke="#333333" stroke-width="1"/>
  <path d="M964 175 L1024 185" stroke="#333333" stroke-width="1"/>
  <path d="M964 210 L1024 205" stroke="#333333" stroke-width="1"/>
  <path d="M964 210 L1024 235" stroke="#333333" stroke-width="1"/>
  <path d="M964 275 L1024 275" stroke="#333333" stroke-width="1"/>
  <path d="M1110 275 L1140 275" stroke="#333333" stroke-width="1"/>
  <path d="M818 345 L878 345" stroke="#333333" stroke-width="1"/>
  <path d="M818 345 L878 345" stroke="#333333" stroke-width="1"/>

  <!-- 图网络模式（网络）-->
  <rect x="0" y="539" width="1248" height="336" rx="6" fill="#F2F2F2" stroke="#DDDDDD"/>
  <text x="108" y="579" font-family="Arial" font-size="18" font-weight="bold" fill="#333333">图网络模式（网络）</text>

  <!-- MCP Host A -->
  <rect x="68" y="706" width="86" height="60" rx="3" fill="#666666"/>
  <text x="111" y="738" font-family="Arial" font-size="14" font-weight="bold" fill="white" text-anchor="middle">MCP Host A</text>

  <!-- MCP Host C -->
  <rect x="386" y="740" width="86" height="60" rx="3" fill="#666666"/>
  <text x="429" y="772" font-family="Arial" font-size="14" font-weight="bold" fill="white" text-anchor="middle">MCP Host C</text>

  <!-- MCP Host B -->
  <rect x="713" y="686" width="86" height="60" rx="3" fill="#666666"/>
  <text x="756" y="718" font-family="Arial" font-size="14" font-weight="bold" fill="white" text-anchor="middle">MCP Host B</text>

  <!-- MCP Server A -->
  <rect x="222" y="636" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="265" y="668" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server A</text>

  <!-- MCP Server B -->
  <rect x="413" y="620" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="456" y="652" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server B</text>

  <!-- MCP Server C -->
  <rect x="222" y="748" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="265" y="780" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server C</text>

  <!-- MCP Server E -->
  <rect x="331" y="862" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="374" y="894" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server E</text>

  <!-- MCP Server F -->
  <rect x="496" y="851" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="539" y="883" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server F</text>

  <!-- MCP Server G -->
  <rect x="559" y="700" width="86" height="60" rx="3" fill="#C5D9F1" stroke="#76A5DC"/>
  <text x="602" y="732" font-family="Arial" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle">MCP Server G</text>

  <!-- 连接线 -->
  <path d="M68 706 L222 660" stroke="#4A86E8" stroke-width="2"/>
  <path d="M68 740 L222 770" stroke="#4A86E8" stroke-width="2"/>
  <path d="M222 636 L222 748" stroke="#4A86E8" stroke-width="2"/>
  <path d="M222 660 L413 640" stroke="#4A86E8" stroke-width="2"/>
  <path d="M222 770 L331 862" stroke="#4A86E8" stroke-width="2"/>
  <path d="M331 890 L496 880" stroke="#4A86E8" stroke-width="2"/>
  <path d="M413 660 L559 700" stroke="#4A86E8" stroke-width="2"/>
  <path d="M413 640 L413 620" stroke="#4A86E8" stroke-width="2"/>
  <path d="M386 770 L222 770" stroke="#4A86E8" stroke-width="2"/>
  <path d="M386 770 L331 862" stroke="#4A86E8" stroke-width="2"/>
  <path d="M386 740 L413 680" stroke="#4A86E8" stroke-width="2"/>
  <path d="M386 760 L496 851" stroke="#4A86E8" stroke-width="2"/>
  <path d="M559 730 L496 851" stroke="#4A86E8" stroke-width="2"/>
  <path d="M559 700 L713 686" stroke="#4A86E8" stroke-width="2"/>
  <path d="M713 716 L559 730" stroke="#4A86E8" stroke-width="2"/>
  <path d="M713 716 L496 880" stroke="#4A86E8" stroke-width="2"/>
  <path d="M413 620 L713 686" stroke="#4A86E8" stroke-width="2"/>

  <!-- 问题1 -->
  <text x="61" y="330" font-family="Arial" font-size="14" font-weight="bold" fill="#333333">问题:</text>
  <text x="61" y="350" font-family="Arial" font-size="12" fill="#333333">tool/prompt的命名冲突问题</text>

  <!-- 示例 -->
  <text x="61" y="370" font-family="Arial" font-size="12" fill="#333333">{</text>
  <text x="61" y="390" font-family="Arial" font-size="12" fill="#333333">"prompt":"文章",</text>
  <text x="61" y="410" font-family="Arial" font-size="12" fill="#333333">"id":"1",</text>
  <text x="61" y="430" font-family="Arial" font-size="12" fill="#333333">"model":"module",</text>
  <text x="61" y="450" font-family="Arial" font-size="12" fill="#333333">"params":{</text>
  <text x="61" y="470" font-family="Arial" font-size="12" fill="#333333">"namespace":"my-code-reviewer.com",</text>
  <text x="61" y="490" font-family="Arial" font-size="12" fill="#333333">"cursor":"optional cursor value"</text>
  <text x="61" y="510" font-family="Arial" font-size="12" fill="#333333">}</text>
  <text x="61" y="530" font-family="Arial" font-size="12" fill="#333333">}</text>

  <!-- 问题2 -->
  <text x="565" y="430" font-family="Arial" font-size="14" font-weight="bold" fill="#333333">问题:</text>
  <text x="565" y="450" font-family="Arial" font-size="12" fill="#333333">多层传递中的路径、initializeResult/Instruction怎么有效传递给其他的MCP Server对应的API</text>
  <text x="565" y="470" font-family="Arial" font-size="12" fill="#333333">这里就有路由和转发问题，当前的list_change命令是从全局到本地的，每个大服务器的APIs</text>

  <!-- 代理与网格 -->
  <text x="565" y="500" font-family="Arial" font-size="14" font-weight="bold" fill="#333333">代理 or 网格?</text>
  <text x="565" y="520" font-family="Arial" font-size="12" fill="#333333">代理：每一个服务的MCP Server是生变，意思说每个传统意义和的tools必须通过近距离的MCP Host？</text>
  <text x="565" y="540" font-family="Arial" font-size="12" fill="#333333">网格：去中心化的，节点同时可能同时tools，这种情况下需要考虑的东西</text>

  <!-- 分布图描述 -->
  <text x="108" y="939" font-family="Arial" font-size="12" fill="#333333">分布式的MultiAgents系统是一个节点网，每个节点既可以是Host，也可以是Server</text>
  <text x="108" y="959" font-family="Arial" font-size="12" fill="#333333">当MCP Server是变更时，请勿在传递有用的功能路径，同个系统内广播</text>
</svg> 